<h2>{{selectedBook ? "Update/View Book" : "Create Book"}}</h2>

<form [formGroup]="searchForm">
  <div class="form-row">
    <mat-form-field class="form-field">
      <mat-label>Treatments</mat-label>
      <mat-select formControlName="treatment" [compareWith]="compareTreatmentObjects">
        <mat-option *ngFor="let treatment of treatments" [value]="treatment">{{ treatment.name
          }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label>Date</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="dateBook">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </div>

  <div class="button-group">
    <button mat-raised-button color="primary" [disabled]="searchForm.invalid" (click)="emitAction()">
      {{actionButtonLabel}}
    </button>

    <button mat-raised-button color="warn" (click)="clear()">
      Clear
    </button>

    <button mat-raised-button color="primary" [disabled]="searchForm.invalid" (click)="searchSlots()">Search
      Slots</button>
  </div>

</form>

<hr>

<!-- <div *ngIf="bookSlots$ | async as bookSlots"> -->
<ng-container *ngIf="bookSlots$ | async as bookSlots">
  <div *ngIf="getBookSlotsSize(bookSlots) > 0">
  <h3>Results:</h3>
  <ul>
    <li *ngFor="let slotKey of bookSlots | keys">
      <h4>Time: {{ slotKey}}</h4>
      <ul>
        <li>
          <p>{{ bookSlots[slotKey]['dateBook']}}</p>
          <p>{{ bookSlots[slotKey]['startTimeBook']}} - {{ bookSlots[slotKey]['finishTimeBook']}}</p>
        </li>
        <ul>
          <li *ngFor="let bookSlot of toArray(bookSlots[slotKey]['bookDetails'])">
            <p>Professional: {{ bookSlot.userName }}</p>
          </li>

        </ul>
      </ul>
    </li>
  </ul>
</div>
</ng-container>